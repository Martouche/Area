<!doctype html>
<html lang="en">
  <head>
  	<title>Area</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/home.css">
  </head>
  <body>

		<div class="d-flex align-items-stretch">
			<nav id="sidebar" class="img" style="background-image: url(images/bg_1.jpg);">
				<div class="p-4">
		  		<h1><a href="home.html" class="logo">AREA<span>Epitech Area</span></a></h1>
	        <ul class="list-unstyled components mb-5">
	          <li class="active">
                <div class="d-flex custom-control custom-switch">
                    <a href="#"><span class="fa fa-spotify mr-3"></span> Spotify </a>
                    <input type="checkbox" class="custom-control-input" id="customSwitch1">
                    <label class="custom-control-label place-spotify" for="customSwitch1"></label>
                </div>
	          </li>
	          <li>
              <div class="d-flex custom-control custom-switch">
                <a href="#"><span class="fa fa-google mr-3"></span> Google </a>
                <input type="checkbox" class="custom-control-input" id="customSwitch2">
                <label class="custom-control-label place-google" for="customSwitch2"></label>
              </div>
	          </li>
	          <li>
              <div class="d-flex custom-control custom-switch">
                <a href="#"><span class="fa fa-linkedin mr-3"></span> Linkedin </a>
                <input type="checkbox" class="custom-control-input" id="customSwitch3">
                <label class="custom-control-label place-linkedin" for="customSwitch3"></label>
              </div>
	          </li>
	          <li>
              <div class="d-flex custom-control custom-switch">
                <a href="#"><span class="fa fa-spotify mr-3"></span> Spotify </a>
                <input type="checkbox" class="custom-control-input" id="customSwitch4">
                <label class="custom-control-label place-spotify" for="customSwitch4"></label>
              </div>
            </li>
	          <li>
              <div class="d-flex custom-control custom-switch">
                <a href="#"><span class="fa fa-github mr-3"></span> GitHub </a>
                <input type="checkbox" class="custom-control-input" id="customSwitch5">
                <label class="custom-control-label place-github" for="customSwitch5"></label>
              </div>
	          </li>
	          <li>
              <div class="d-flex custom-control custom-switch">
                <a href="#"><span class="fa fa-facebook mr-3"></span> Facebook </a>
                <input type="checkbox" class="custom-control-input" id="customSwitch6">
                <label class="custom-control-label place-facebook" for="customSwitch6"></label>
              </div>
              </li>
              <li>
                <div class="d-flex custom-control custom-switch">
                  <a href="#"><span class="fa fa-twitter mr-3"></span> Twitter </a>
                  <input type="checkbox" class="custom-control-input" id="customSwitch7">
                  <label class="custom-control-label place-twitter" for="customSwitch7"></label>
                </div>
              </li>
              <li>
                <div class="d-flex custom-control custom-switch">
                  <a href="#"><span class="fa fa-discord mr-3"></span> Discord </a>
                  <input type="checkbox" class="custom-control-input" id="customSwitch8">
                  <label class="custom-control-label place-discord" for="customSwitch8"></label>
                </div>
              </li>
              <li>
                <div class="d-flex custom-control custom-switch">
                  <a href="#"><span class="fa fa-reddit mr-3"></span> Reddit </a>
                  <input type="checkbox" class="custom-control-input" id="customSwitch9">
                  <label class="custom-control-label place-reddit" for="customSwitch9"></label>
                </div>
              </li>
              <li>
                <a href="/logout"><span class="fa fa-sign-out mr-3 "></span> Sign out</a>
              </li>
	        </ul>

	        <div class="footer fixed-bottom p-4">
	        	<p>Area, Epitech project</p>
	        </div>

	      </div>
    	</nav>

        <!-- Page Content  -->
      <div id="content" class="p-4 p-md-5 pt-5">
        <h2 class="mb-4">Votre compte</h2>
        <p>Vous pouvez retrouver ici tous vos services</p>
      </div>
        </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/core.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.js"></script>
    <script>
    var url = window.location.href;
    var id = url.substring(url.lastIndexOf('=') + 1);
/*    let xhttp = new XMLHttpRequest();

    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
           // Typical action to be performed when the document is ready:
           document.getElementById("demo").innerHTML = xhttp.responseText;
        }
        alert(xhttp.responseText);
    };
    xhttp.open('GET', 'http://localhost:8080/getServiceForUser?userid=1');
    xhttp.send();
//    alert("niqueee ta mere");
    xhr.onload = function() {
        if (xhr.status != 200) { // analyze HTTP status of the response
            alert("ici");
        } else { // show the result
            alert("ici");
        }
    };
*/      $.ajax({
          type: "GET",
          url: ("http://localhost:8080/getServiceForUser?userid=" + id),
          dataType: "json",
          success: function(data) {
               alert(data);
               console.log(data);
          },
          error: function(data){
              alert(data[0]);
              console.log("nique ta mereezzzzzzzzzzz" + data);
         }
      });
      </script>

      <script>

      $("#customSwitch1").on( "click", function() {
        if ($("#customSwitch1").is(':checked')) {
          alert("Vous venez d'activer votre service Spotify");
          //document.location.href="http://localhost:8080/oauth2/autorize/spotify"
        }
        else {
          alert("Vous venez de désactiver votre service Spotify");
        }
      });
      $("#customSwitch2").on( "click", function() {
        if ($("#customSwitch2").is(':checked')) {
          alert("Vous venez d'activer votre service Google");
          document.location.href="http://localhost:8080/oauth2/autorize/google"
        }
        else
          alert("Vous venez de désactiver votre service Google");
      });
      $("#customSwitch3").on( "click", function() {
        if ($("#customSwitch3").is(':checked')) {
          alert("Vous venez d'activer votre service Google");
          document.location.href="http://localhost:8080/oauth2/autorize/linkedin"
        }
        else
          alert("Off");
      });
      $("#customSwitch4").on( "click", function() {
        if ($("#customSwitch4").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/spotify"
        }
        else
          alert("Off");
      });
      $("#customSwitch5").on( "click", function() {
        if ($("#customSwitch5").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/github"
        }
        else
          alert("Off");
      });
      $("#customSwitch6").on( "click", function() {
        if ($("#customSwitch6").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/linkedin"
        }
        else
          alert("Off");
      });
      $("#customSwitch7").on( "click", function() {
        if ($("#customSwitch7").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/twitter"
        }
        else
          alert("Off");
      });
      $("#customSwitch8").on( "click", function() {
        if ($("#customSwitch8").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/discord"
        }
        else
          alert("Off");
      });
      $("#customSwitch9").on( "click", function() {
        if ($("#customSwitch9").is(':checked')) {
          alert("On");
          document.location.href="http://localhost:8080/oauth2/autorize/reddit"
        }
        else
          alert("Off");
      });

    </script>
  </body>
</html>
